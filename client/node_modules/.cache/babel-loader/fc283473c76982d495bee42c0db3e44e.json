{"ast":null,"code":"import _regeneratorRuntime from\"D:/course-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/course-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:/course-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/course-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/course-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Link}from'react-router-dom';import styles from'./styles.module.css';import img from\"./Bitmap.svg\";import{useState,useContext}from'react';import{useHttp}from'../../hooks/http.hook';import{AuthContext}from'../../context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=function LoginPage(){var auth=useContext(AuthContext);var _useHttp=useHttp(),loading=_useHttp.loading,error=_useHttp.error,request=_useHttp.request;var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var changeHandler=function changeHandler(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value)));};var loginHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request('api/auth/login','POST',_objectSpread({},form));case 3:data=_context.sent;auth.login(data.token,data.userId);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function loginHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"wrapp\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"div\",{className:styles.wrappTitle,children:[/*#__PURE__*/_jsx(\"img\",{src:img}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:styles.title,children:\"MORDOR\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.wrappMain,children:/*#__PURE__*/_jsxs(\"form\",{className:styles.wrappColumn,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.titleUp,children:\"Log in\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.wrappForm,children:[/*#__PURE__*/_jsx(\"label\",{className:styles.labels,children:\"Email*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:styles.inputColumn,onChange:changeHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.wrappForm,children:[/*#__PURE__*/_jsx(\"label\",{className:styles.labels,children:\"Password*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"password\",className:styles.inputColumn,onChange:changeHandler})]}),/*#__PURE__*/_jsxs(\"button\",{className:styles.Sign,disabled:loading,onClick:loginHandler,children:[\" \",/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:\" Log in\"})]})]})})]});};export default LoginPage;","map":{"version":3,"sources":["D:/course-project/client/src/pages/LoginPage/index.js"],"names":["React","Link","styles","useState","useContext","useHttp","AuthContext","LoginPage","auth","loading","error","request","email","password","form","setForm","changeHandler","event","target","name","value","loginHandler","data","login","token","userId","wrappTitle","img","title","wrappMain","wrappColumn","titleUp","wrappForm","labels","inputColumn","Sign"],"mappings":"ysBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,C,8BAEA,OAAQC,QAAR,CAAkBC,UAAlB,KAAmC,OAAnC,CACA,OAAQC,OAAR,KAAsB,uBAAtB,CACA,OAASC,WAAT,KAA4B,2BAA5B,C,wFAEC,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAEvB,GAAMC,CAAAA,IAAI,CAAGJ,UAAU,CAACE,WAAD,CAAvB,CAFuB,aAISD,OAAO,EAJhB,CAIhBI,OAJgB,UAIhBA,OAJgB,CAIRC,KAJQ,UAIRA,KAJQ,CAIFC,OAJE,UAIFA,OAJE,eAMAR,QAAQ,CAAC,CAC9BS,KAAK,CAAE,EADuB,CACnBC,QAAQ,CAAC,EADU,CAAD,CANR,wCAMhBC,IANgB,eAMXC,OANW,eAUrB,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,KAAK,CAAI,CAC3BF,OAAO,gCAAKD,IAAL,wBAAYG,KAAK,CAACC,MAAN,CAAaC,IAAzB,CAAgCF,KAAK,CAACC,MAAN,CAAaE,KAA7C,GAAP,CACH,CAFD,CAIA,GAAMC,CAAAA,YAAY,0FAAG,kLAEMV,CAAAA,OAAO,CAAE,gBAAF,CAAoB,MAApB,kBAAgCG,IAAhC,EAFb,QAEPQ,IAFO,eAGbd,IAAI,CAACe,KAAL,CAAWD,IAAI,CAACE,KAAhB,CAAuBF,IAAI,CAACG,MAA5B,EAHa,iJAAH,kBAAZJ,CAAAA,YAAY,0CAAlB,CAQA,mBACI,aAAK,SAAS,CAAC,OAAf,wBACI,qCACA,aAAK,SAAS,CAAEnB,MAAM,CAACwB,UAAvB,wBACa,YAAK,GAAG,CAAEC,GAAV,EADb,cAEa,UAAG,IAAI,CAAC,GAAR,CAAY,SAAS,CAAEzB,MAAM,CAAC0B,KAA9B,oBAFb,GADA,EADJ,cAOI,YAAK,SAAS,CAAE1B,MAAM,CAAC2B,SAAvB,uBACI,cAAM,SAAS,CAAE3B,MAAM,CAAC4B,WAAxB,wBACI,WAAI,SAAS,CAAE5B,MAAM,CAAC6B,OAAtB,oBADJ,cAEI,aAAK,SAAS,CAAE7B,MAAM,CAAC8B,SAAvB,wBACA,cAAO,SAAS,CAAE9B,MAAM,CAAC+B,MAAzB,oBADA,cAEI,cAAO,IAAI,CAAC,OAAZ,CAAoB,IAAI,CAAG,OAA3B,CAAmC,SAAS,CAAE/B,MAAM,CAACgC,WAArD,CAAkE,QAAQ,CAAElB,aAA5E,EAFJ,GAFJ,cAMI,aAAK,SAAS,CAAEd,MAAM,CAAC8B,SAAvB,wBACA,cAAO,SAAS,CAAE9B,MAAM,CAAC+B,MAAzB,uBADA,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,UAAxB,CAAmC,SAAS,CAAE/B,MAAM,CAACgC,WAArD,CAAkE,QAAQ,CAAElB,aAA5E,EAFJ,GANJ,cAUI,gBAAQ,SAAS,CAAEd,MAAM,CAACiC,IAA1B,CAAgC,QAAQ,CAAE1B,OAA1C,CAAmD,OAAO,CAAEY,YAA5D,4BAA2E,KAAC,IAAD,EAAM,EAAE,CAAC,UAAT,qBAA3E,GAVJ,GADJ,EAPJ,GADJ,CA2BH,CAjDA,CAmDD,cAAed,CAAAA,SAAf","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport styles from './styles.module.css'\r\nimport img from './Bitmap.svg'\r\nimport {useState, useContext} from 'react'\r\nimport {useHttp} from '../../hooks/http.hook'\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\n const LoginPage = () => {\r\n\r\n  const auth = useContext(AuthContext)\r\n\r\n  const {loading,error,request} = useHttp()\r\n\r\n  const [form,setForm] = useState({\r\n    email: '', password:''\r\n}) \r\n\r\n    const changeHandler = event => {\r\n        setForm({...form, [event.target.name]: event.target.value})\r\n    }\r\n\r\n    const loginHandler = async() => {\r\n        try {\r\n            const data = await request ('api/auth/login', 'POST', {...form})\r\n            auth.login(data.token, data.userId)\r\n         \r\n        } catch (e) {}\r\n    }   \r\n\r\n    return (\r\n        <div className=\"wrapp\">\r\n            <header>\r\n            <div className={styles.wrappTitle}>\r\n                         <img src={img}></img>\r\n                         <a href=\"/\" className={styles.title}>MORDOR</a>\r\n                         </div>\r\n            </header>\r\n            <div className={styles.wrappMain}>\r\n                <form className={styles.wrappColumn}>\r\n                    <h2 className={styles.titleUp}>Log in</h2>\r\n                    <div className={styles.wrappForm} >\r\n                    <label className={styles.labels}>Email*</label>\r\n                        <input type=\"email\" name = \"email\" className={styles.inputColumn} onChange={changeHandler}></input> \r\n                    </div>\r\n                    <div className={styles.wrappForm}>\r\n                    <label className={styles.labels}>Password*</label>\r\n                        <input type=\"text\" name=\"password\" className={styles.inputColumn} onChange={changeHandler}></input> \r\n                    </div>\r\n                    <button className={styles.Sign} disabled={loading} onClick={loginHandler}> <Link to=\"/profile\"> Log in</Link></button>\r\n                </form>\r\n            </div>\r\n            \r\n\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoginPage"]},"metadata":{},"sourceType":"module"}