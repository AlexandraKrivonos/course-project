{"ast":null,"code":"import _regeneratorRuntime from\"D:/course-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/course-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:/course-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/course-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/course-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import{useHistory}from\"react-router-dom\";import Modal from\"react-modal\";import styles from\"./styles.module.css\";import{useHttp}from\"../hooks/http.hook\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require(\"../context/AuthContext\"),AuthContext=_require.AuthContext;var customStyles={content:{top:\"50%\",left:\"50%\",right:\"auto\",bottom:\"auto\",marginRight:\"-50%\",transform:\"translate(-50%, -50%)\"}};var Button=function Button(){var history=useHistory();var auth=useContext(AuthContext);var _useHttp=useHttp(),request=_useHttp.request;var subtitle;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),modalIsOpen=_React$useState2[0],setIsOpen=_React$useState2[1];function openModal(){setIsOpen(true);}function afterOpenModal(){subtitle.style.color=\" #2F281E\";}function closeModal(){setIsOpen(false);}var _useState=useState({title:\"\",genre:\"detectives\",shortDescription:\"\"}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var changeHandler=function changeHandler(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value)));};var createHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request(\"/api/fanfic/generate\",\"POST\",_objectSpread(_objectSpread({},form),{},{userId:JSON.parse(localStorage.getItem(\"userData\")).userId}),{Authorization:\"Bearer \".concat(auth.token)});case 3:data=_context.sent;_context.next=8;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function createHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:styles.flexButton,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.start,onClick:openModal,children:\"Create fanfic\"}),/*#__PURE__*/_jsxs(Modal,{isOpen:modalIsOpen,onAfterOpen:afterOpenModal,onRequestClose:closeModal,style:customStyles,className:styles.modal,contentLabel:\"Example Modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.mainWrappForm,children:[/*#__PURE__*/_jsx(\"h2\",{ref:function ref(_subtitle){return subtitle=_subtitle;},className:styles.fanfic,children:\"New Fanfic\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.wrappForm,children:[/*#__PURE__*/_jsx(\"label\",{className:styles.labels,children:\"Name of the fanfic*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",className:styles.inputColumn,onChange:changeHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.wrappForm,children:[/*#__PURE__*/_jsx(\"label\",{className:styles.labels,children:\" Genres*\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"genre\",id:\"genre\",className:styles.labels,onChange:changeHandler,children:[/*#__PURE__*/_jsx(\"option\",{value:\"detectives\",children:\"Detectives\"}),/*#__PURE__*/_jsx(\"option\",{value:\"comics and manga\",children:\"Comics and manga\"}),/*#__PURE__*/_jsx(\"option\",{value:\"romance\",children:\"Romance\"}),/*#__PURE__*/_jsx(\"option\",{value:\"poetry\",children:\"Poetry\"}),/*#__PURE__*/_jsx(\"option\",{value:\"thrillers\",children:\"Thrillers\"}),/*#__PURE__*/_jsx(\"option\",{value:\"adventures\",children:\"Adventures\"}),/*#__PURE__*/_jsx(\"option\",{value:\"prose\",children:\"Prose\"}),/*#__PURE__*/_jsx(\"option\",{value:\"horror\",children:\"Horror\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.wrappForm,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Short description*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"shortDescription\",className:styles.inputDescription,onChange:changeHandler})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.wrappButtons,children:[/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,className:styles.close,children:\"Close\"}),/*#__PURE__*/_jsxs(\"button\",{className:styles.create,onClick:createHandler,children:[\" \",\"Create\"]})]})]})]});};export default Button;","map":{"version":3,"sources":["D:/course-project/client/src/Layout/Button.js"],"names":["React","useContext","useState","useHistory","Modal","styles","useHttp","require","AuthContext","customStyles","content","top","left","right","bottom","marginRight","transform","Button","history","auth","request","subtitle","modalIsOpen","setIsOpen","openModal","afterOpenModal","style","color","closeModal","title","genre","shortDescription","form","setForm","changeHandler","event","target","name","value","createHandler","userId","JSON","parse","localStorage","getItem","Authorization","token","data","flexButton","start","modal","mainWrappForm","_subtitle","fanfic","wrappForm","labels","inputColumn","inputDescription","wrappButtons","close","create"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Modal from \"react-modal\";\r\nimport styles from \"./styles.module.css\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nconst { AuthContext } = require(\"../context/AuthContext\");\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n  },\r\n};\r\nconst Button = () => {\r\n  const history = useHistory();\r\n\r\n  const auth = useContext(AuthContext);\r\n\r\n  const { request } = useHttp();\r\n\r\n  let subtitle;\r\n  const [modalIsOpen, setIsOpen] = React.useState(false);\r\n  function openModal() {\r\n    setIsOpen(true);\r\n  }\r\n\r\n  function afterOpenModal() {\r\n    subtitle.style.color = \" #2F281E\";\r\n  }\r\n\r\n  function closeModal() {\r\n    setIsOpen(false);\r\n  }\r\n\r\n  const [form, setForm] = useState({\r\n    title: \"\",\r\n    genre: \"detectives\",\r\n    shortDescription: \"\",\r\n  });\r\n\r\n  const changeHandler = (event) => {\r\n    setForm({ ...form, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const createHandler = async () => {\r\n    try {\r\n      const data = await request(\r\n        \"/api/fanfic/generate\",\r\n        \"POST\",\r\n        { ...form, userId:  JSON.parse(localStorage.getItem(\"userData\")).userId },\r\n        {\r\n          Authorization: `Bearer ${auth.token}`,\r\n        }\r\n      );\r\n    } catch (err) {}\r\n  };\r\n\r\n  return (\r\n    <div className={styles.flexButton}>\r\n      <button className={styles.start} onClick={openModal}>\r\n        Create fanfic\r\n      </button>\r\n      <Modal\r\n        isOpen={modalIsOpen}\r\n        onAfterOpen={afterOpenModal}\r\n        onRequestClose={closeModal}\r\n        style={customStyles}\r\n        className={styles.modal}\r\n        contentLabel=\"Example Modal\"\r\n      >\r\n        <div className={styles.mainWrappForm}>\r\n          <h2\r\n            ref={(_subtitle) => (subtitle = _subtitle)}\r\n            className={styles.fanfic}\r\n          >\r\n            New Fanfic\r\n          </h2>\r\n          <div className={styles.wrappForm}>\r\n            <label className={styles.labels}>Name of the fanfic*</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"title\"\r\n              className={styles.inputColumn}\r\n              onChange={changeHandler}\r\n            ></input>\r\n          </div>\r\n          <div className={styles.wrappForm}>\r\n            <label className={styles.labels}> Genres*</label>\r\n\r\n            <select\r\n              name=\"genre\"\r\n              id=\"genre\"\r\n              className={styles.labels}\r\n              onChange={changeHandler}\r\n            >\r\n              <option value=\"detectives\">Detectives</option>\r\n              <option value=\"comics and manga\">Comics and manga</option>\r\n              <option value=\"romance\">Romance</option>\r\n              <option value=\"poetry\">Poetry</option>\r\n              <option value=\"thrillers\">Thrillers</option>\r\n              <option value=\"adventures\">Adventures</option>\r\n              <option value=\"prose\">Prose</option>\r\n              <option value=\"horror\">Horror</option>\r\n            </select>\r\n          </div>\r\n          <div className={styles.wrappForm}>\r\n            <label>Short description*</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"shortDescription\"\r\n              className={styles.inputDescription}\r\n              onChange={changeHandler}\r\n            ></input>\r\n          </div>\r\n        </div>\r\n        <div className={styles.wrappButtons}>\r\n          <button onClick={closeModal} className={styles.close}>\r\n            Close\r\n          </button>\r\n          <button className={styles.create} onClick={createHandler}>\r\n            {\" \"}\r\n            Create\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n"]},"metadata":{},"sourceType":"module"}