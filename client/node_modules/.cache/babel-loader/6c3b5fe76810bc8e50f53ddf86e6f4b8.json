{"ast":null,"code":"import _regeneratorRuntime from\"D:/course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useCallback,useEffect}from'react';import{useHttp}from'../../hooks/http.hook';import Loader from'../../components/Loader';import FanficCard from'../../components/FanficCard';import styles from'./styles.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";var ProfilePage=function ProfilePage(){var token=JSON.parse(localStorage.getItem('userData')).token.token;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),fanfics=_useState2[0],setFanfics=_useState2[1];var _useHttp=useHttp(),loading=_useHttp.loading,request=_useHttp.request;var fetchFanfics=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetched;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request('api/fanfic','GET',null,{Authorization:\"Bearer \".concat(token)});case 3:fetched=_context.sent;debugger;setFanfics(fetched);_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);})),[token,request]);useEffect(function(){fetchFanfics();},[fetchFanfics]);if(loading){return/*#__PURE__*/_jsx(Loader,{});}return/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",children:/*#__PURE__*/_jsx(FanficCard,{fanfics:fanfics})});};export default ProfilePage;","map":{"version":3,"sources":["D:/course/client/src/pages/ProfilePage/index.js"],"names":["React","useState","useContext","useCallback","useEffect","useHttp","Loader","FanficCard","styles","ProfilePage","token","JSON","parse","localStorage","getItem","fanfics","setFanfics","loading","request","fetchFanfics","Authorization","fetched"],"mappings":"kZAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,UAAzB,CAAqCC,WAArC,CAAkDC,SAAlD,KAAkE,OAAlE,CACA,OAASC,OAAT,KAAwB,uBAAxB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,6BAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,C,2CAEC,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,IAEhBC,CAAAA,KAFgB,CAEPC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,EAA6CJ,KAFtC,CAEhBA,KAFgB,eAIQT,QAAQ,CAAC,EAAD,CAJhB,wCAIfc,OAJe,eAINC,UAJM,4BAKKX,OAAO,EALZ,CAKfY,OALe,UAKfA,OALe,CAKNC,OALM,UAKNA,OALM,CAStB,GAAMC,CAAAA,YAAY,CAAGhB,WAAW,sEAAC,qLAEHe,CAAAA,OAAO,CAAC,YAAD,CAAe,KAAf,CAAsB,IAAtB,CAA4B,CACtDE,aAAa,kBAAYV,KAAZ,CADyC,CAA5B,CAFJ,QAEnBW,OAFmB,eAMnC,SAEUL,UAAU,CAACK,OAAD,CAAV,CARyB,mJAAD,GAa7B,CAACX,KAAD,CAAQQ,OAAR,CAb6B,CAAhC,CAeAd,SAAS,CAAC,UAAM,CAEbe,YAAY,GAEf,CAJS,CAIP,CAACA,YAAD,CAJO,CAAT,CAMD,GAAIF,OAAJ,CAAa,CACT,mBAAO,KAAC,MAAD,IAAP,CAEH,CAGD,mBACI,YAAK,SAAS,CAAC,SAAf,uBAEM,KAAC,UAAD,EAAY,OAAO,CAAEF,OAArB,EAFN,EADJ,CAOH,CA3CA,CA6CD,cAAeN,CAAAA,WAAf","sourcesContent":["import React, {useState, useContext, useCallback, useEffect} from 'react'\r\nimport { useHttp } from '../../hooks/http.hook'\r\n\r\nimport Loader from '../../components/Loader'\r\nimport FanficCard from '../../components/FanficCard'\r\nimport styles from './styles.module.css'\r\n\r\n const ProfilePage = () => {\r\n\r\n    const {token} = JSON.parse(localStorage.getItem('userData')).token\r\n    \r\n     const [fanfics, setFanfics] = useState([])\r\n     const {loading, request} = useHttp()\r\n     \r\n     \r\n\r\n     const fetchFanfics = useCallback(async () => {\r\n         try {\r\n             const fetched = await request('api/fanfic', 'GET', null, {\r\n                Authorization: `Bearer ${token}`\r\n             }) \r\n                  \r\n   debugger\r\n         \r\n             setFanfics(fetched)\r\n         } catch (e) {\r\n             \r\n         }\r\n\r\n     }, [token, request])\r\n\r\n     useEffect(() => {\r\n        \r\n        fetchFanfics()\r\n        \r\n    }, [fetchFanfics])\r\n\r\n    if (loading) {\r\n        return <Loader />\r\n\r\n    }\r\n\r\n   \r\n    return (\r\n        <div className=\"wrapper\">\r\n            \r\n            { <FanficCard fanfics={fanfics} />}\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfilePage"]},"metadata":{},"sourceType":"module"}