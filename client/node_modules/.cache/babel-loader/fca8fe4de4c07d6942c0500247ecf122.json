{"ast":null,"code":"const express = require(\"express\");\n\nconst config = require(\"config\");\n\nconst path = require(\"path\");\n\nconst mongoose = require(\"mongoose\");\n\nconst app = express();\napp.use(express.json({\n  extended: true\n}));\napp.use(\"/api/auth/\", require(\"./routes/auth.routes\"));\napp.use(\"/api/fanfic\", require(\"./routes/fanfic.routes\"));\n\nif (process.env.NODE_ENV === \"production\") {\n  app.use(\"/\", express.static(path.join(__dirname, \"client\", \"build\")));\n  app.get(\"*\", (req, res) => {\n    res.sentFile(path.resolve(__dirname, \"client\", \"build\", \"index.html\"));\n  });\n}\n\nconst PORT = config.get(\"port\") || 5000;\n\nasync function start() {\n  try {\n    await mongoose.connect(config.get(\"mongoUri\"), {\n      useNewUrlParser: true,\n      useUnifiedTopology: true,\n      useCreateIndex: true\n    });\n    app.listen(PORT, () => console.log(`App has been stareted on ${PORT} `));\n  } catch (e) {\n    console.log(\"Server Error\", e.message);\n    process.exit(1);\n  }\n}\n\nstart();","map":{"version":3,"sources":["D:/course/app.js"],"names":["express","require","config","path","mongoose","app","use","json","extended","process","env","NODE_ENV","static","join","__dirname","get","req","res","sentFile","resolve","PORT","start","connect","useNewUrlParser","useUnifiedTopology","useCreateIndex","listen","console","log","e","message","exit"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMG,QAAQ,GAAGH,OAAO,CAAC,UAAD,CAAxB;;AAEA,MAAMI,GAAG,GAAGL,OAAO,EAAnB;AAEAK,GAAG,CAACC,GAAJ,CAAQN,OAAO,CAACO,IAAR,CAAa;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAb,CAAR;AAEAH,GAAG,CAACC,GAAJ,CAAQ,YAAR,EAAsBL,OAAO,CAAC,sBAAD,CAA7B;AACAI,GAAG,CAACC,GAAJ,CAAQ,aAAR,EAAuBL,OAAO,CAAC,wBAAD,CAA9B;;AAEA,IAAIQ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCN,EAAAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAaN,OAAO,CAACY,MAAR,CAAeT,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAqB,QAArB,EAA+B,OAA/B,CAAf,CAAb;AAEAT,EAAAA,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,IAAAA,GAAG,CAACC,QAAJ,CAAaf,IAAI,CAACgB,OAAL,CAAaL,SAAb,EAAwB,QAAxB,EAAkC,OAAlC,EAA2C,YAA3C,CAAb;AACD,GAFD;AAGD;;AAED,MAAMM,IAAI,GAAGlB,MAAM,CAACa,GAAP,CAAW,MAAX,KAAsB,IAAnC;;AAEA,eAAeM,KAAf,GAAuB;AACrB,MAAI;AACF,UAAMjB,QAAQ,CAACkB,OAAT,CAAiBpB,MAAM,CAACa,GAAP,CAAW,UAAX,CAAjB,EAAyC;AAC7CQ,MAAAA,eAAe,EAAE,IAD4B;AAE7CC,MAAAA,kBAAkB,EAAE,IAFyB;AAG7CC,MAAAA,cAAc,EAAE;AAH6B,KAAzC,CAAN;AAMApB,IAAAA,GAAG,CAACqB,MAAJ,CAAWN,IAAX,EAAiB,MAAMO,OAAO,CAACC,GAAR,CAAa,4BAA2BR,IAAK,GAA7C,CAAvB;AACD,GARD,CAQE,OAAOS,CAAP,EAAU;AACVF,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BC,CAAC,CAACC,OAA9B;AACArB,IAAAA,OAAO,CAACsB,IAAR,CAAa,CAAb;AACD;AACF;;AAEDV,KAAK","sourcesContent":["const express = require(\"express\");\r\nconst config = require(\"config\");\r\nconst path = require(\"path\");\r\nconst mongoose = require(\"mongoose\");\r\n\r\nconst app = express();\r\n\r\napp.use(express.json({ extended: true }));\r\n\r\napp.use(\"/api/auth/\", require(\"./routes/auth.routes\"));\r\napp.use(\"/api/fanfic\", require(\"./routes/fanfic.routes\"));\r\n\r\nif (process.env.NODE_ENV === \"production\") {\r\n  app.use(\"/\", express.static(path.join(__dirname, \"client\", \"build\")));\r\n\r\n  app.get(\"*\", (req, res) => {\r\n    res.sentFile(path.resolve(__dirname, \"client\", \"build\", \"index.html\"));\r\n  });\r\n}\r\n\r\nconst PORT = config.get(\"port\") || 5000;\r\n\r\nasync function start() {\r\n  try {\r\n    await mongoose.connect(config.get(\"mongoUri\"), {\r\n      useNewUrlParser: true,\r\n      useUnifiedTopology: true,\r\n      useCreateIndex: true,\r\n    });\r\n\r\n    app.listen(PORT, () => console.log(`App has been stareted on ${PORT} `));\r\n  } catch (e) {\r\n    console.log(\"Server Error\", e.message);\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\nstart();\r\n"]},"metadata":{},"sourceType":"script"}