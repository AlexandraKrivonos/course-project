{"ast":null,"code":"import _regeneratorRuntime from\"D:/course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:/course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{useHistory}from'react-router-dom';import Modal from'react-modal';import styles from'./styles.module.css';import{useHttp}from'../hooks/http.hook';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require('../context/AuthContext'),AuthContext=_require.AuthContext;var customStyles={content:{top:'50%',left:'50%',right:'auto',bottom:'auto',marginRight:'-50%',transform:'translate(-50%, -50%)'}};var Button=function Button(){var history=useHistory();var auth=useContext(AuthContext);var _useHttp=useHttp(),request=_useHttp.request;var subtitle;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),modalIsOpen=_React$useState2[0],setIsOpen=_React$useState2[1];function openModal(){setIsOpen(true);}function afterOpenModal(){subtitle.style.color=' #2F281E';}function closeModal(){setIsOpen(false);}var _useState=useState({title:'',genre:'detectives',shortDescription:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var changeHandler=function changeHandler(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value)));};var createHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request('/api/fanfic/generate','POST',_objectSpread({},form),{Authorization:\"Bearer \".concat(auth.token)});case 3:data=_context.sent;_context.next=8;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function createHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:styles.flexButton,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.start,onClick:openModal,children:\"Create fanfic\"}),/*#__PURE__*/_jsxs(Modal,{isOpen:modalIsOpen,onAfterOpen:afterOpenModal,onRequestClose:closeModal,style:customStyles,className:styles.modal,contentLabel:\"Example Modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.mainWrappForm,children:[/*#__PURE__*/_jsx(\"h2\",{ref:function ref(_subtitle){return subtitle=_subtitle;},className:styles.fanfic,children:\"New Fanfic\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.wrappForm,children:[/*#__PURE__*/_jsx(\"label\",{className:styles.labels,children:\"Name of the fanfic*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",className:styles.inputColumn,onChange:changeHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.wrappForm,children:[/*#__PURE__*/_jsx(\"label\",{className:styles.labels,children:\" Genres*\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"genre\",id:\"genre\",className:styles.labels,onChange:changeHandler,children:[/*#__PURE__*/_jsx(\"option\",{value:\"detectives\",children:\"Detectives\"}),/*#__PURE__*/_jsx(\"option\",{value:\"comics and manga\",children:\"Comics and manga\"}),/*#__PURE__*/_jsx(\"option\",{value:\"romance\",children:\"Romance\"}),/*#__PURE__*/_jsx(\"option\",{value:\"poetry\",children:\"Poetry\"}),/*#__PURE__*/_jsx(\"option\",{value:\"thrillers\",children:\"Thrillers\"}),/*#__PURE__*/_jsx(\"option\",{value:\"adventures\",children:\"Adventures\"}),/*#__PURE__*/_jsx(\"option\",{value:\"prose\",children:\"Prose\"}),/*#__PURE__*/_jsx(\"option\",{value:\"horror\",children:\"Horror\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.wrappForm,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Short description*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"shortDescription\",className:styles.inputDescription,onChange:changeHandler})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.wrappButtons,children:[/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,className:styles.close,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.create,onClick:createHandler,children:\" Create\"})]})]})]});};export default Button;","map":{"version":3,"sources":["D:/course/client/src/Layout/Button.js"],"names":["React","useContext","useState","useHistory","Modal","styles","useHttp","require","AuthContext","customStyles","content","top","left","right","bottom","marginRight","transform","Button","history","auth","request","subtitle","modalIsOpen","setIsOpen","openModal","afterOpenModal","style","color","closeModal","title","genre","shortDescription","form","setForm","changeHandler","event","target","name","value","createHandler","Authorization","token","data","flexButton","start","modal","mainWrappForm","_subtitle","fanfic","wrappForm","labels","inputColumn","inputDescription","wrappButtons","close","create"],"mappings":"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","sourcesContent":["import React, {useContext, useState} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport Modal from 'react-modal';\r\nimport styles from './styles.module.css'\r\nimport {useHttp} from '../hooks/http.hook'\r\nconst {AuthContext} = require('../context/AuthContext')\r\n\r\nconst customStyles = {\r\n    content: {\r\n        top: '50%',\r\n        left: '50%',\r\n        right: 'auto',\r\n        bottom: 'auto',\r\n        marginRight: '-50%',\r\n        transform: 'translate(-50%, -50%)',\r\n    }\r\n};\r\n    const Button = () => {\r\n\r\n        const history = useHistory()\r\n\r\n        const auth = useContext (AuthContext)\r\n\r\n    \r\n\r\n        const {request} = useHttp()\r\n\r\n        let subtitle;\r\n        const [modalIsOpen, setIsOpen] = React.useState(false);\r\n        function openModal() {\r\n            setIsOpen(true);\r\n        }\r\n    \r\n        function afterOpenModal() {\r\n            subtitle.style.color = ' #2F281E';\r\n        }\r\n    \r\n        function closeModal() {\r\n            setIsOpen(false);\r\n\r\n        }\r\n\r\n\r\n        const [form,setForm] = useState({\r\n            title: '', genre: 'detectives', shortDescription:''\r\n        }) \r\n\r\n       \r\n        const changeHandler = event => {\r\n            setForm({...form, [event.target.name]: event.target.value})\r\n           \r\n        }\r\n        \r\n        const createHandler = async () => {\r\n            try{\r\n                const data = await request('/api/fanfic/generate', 'POST', {...form}, {\r\n                    Authorization: `Bearer ${auth.token}`\r\n                })    \r\n            }\r\n            catch (err) {\r\n    \r\n            }\r\n        }\r\n\r\n        return (\r\n\r\n            <div className={styles.flexButton}>\r\n                <button className={styles.start} onClick={openModal}>Create fanfic</button>\r\n                <Modal\r\n                    isOpen={modalIsOpen}\r\n                    onAfterOpen={afterOpenModal}\r\n                    onRequestClose={closeModal}\r\n                    style={customStyles}\r\n                    className={styles.modal}\r\n                    contentLabel=\"Example Modal\"\r\n                >\r\n                    <div className={styles.mainWrappForm}>\r\n                    <h2 ref={_subtitle => (subtitle = _subtitle)} className={styles.fanfic}>New Fanfic</h2>\r\n                    <div className={styles.wrappForm}>\r\n                    <label className={styles.labels}  >Name of the fanfic*</label>\r\n                        <input type=\"text\" name= \"title\" className={styles.inputColumn}  onChange={changeHandler}></input> \r\n                    </div>\r\n                    <div className={styles.wrappForm}>\r\n                    <label className={styles.labels}> Genres*</label>\r\n                   \r\n                    <select name=\"genre\" id=\"genre\" className={styles.labels}  onChange={changeHandler}> \r\n                      <option value='detectives'>Detectives</option>\r\n                      <option value='comics and manga'>Comics and manga</option>\r\n                      <option value='romance'>Romance</option>\r\n                      <option value='poetry'>Poetry</option>\r\n                      <option value='thrillers'>Thrillers</option>\r\n                      <option value='adventures'>Adventures</option>\r\n                      <option value='prose'>Prose</option>\r\n                      <option value='horror'>Horror</option>\r\n                    </select>\r\n                    </div>\r\n                    <div className={styles.wrappForm}>\r\n                    < label >Short description*</label>\r\n                        <input type=\"text\" name= \"shortDescription\"  className={styles.inputDescription} onChange={changeHandler}></input> \r\n                    </div>\r\n                    </div>\r\n                    <div  className={styles.wrappButtons}>\r\n                    <button onClick={closeModal} className={styles.close}>Close</button>\r\n                    <button className={styles.create} onClick={createHandler}> Create</button>\r\n                   \r\n                   </div>\r\n                   \r\n                </Modal>\r\n            </div>\r\n\r\n\r\n        )\r\n\r\n    }\r\n\r\n\r\n    export default Button\r\n"]},"metadata":{},"sourceType":"module"}